<?xml version="1.0" encoding="UTF-8"?>
<sequence name="v1_bulkserviceError" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
  <payloadFactory media-type="json">
    <format>
					{
					"error":"$1",
					"code":"$3",
					"description":"$2"
					}
				</format>
    <args>
      <arg evaluator="xml" expression="get-property('status')"/>
      <arg evaluator="xml" expression="get-property('error_description')"/>
      <arg evaluator="xml" expression="get-property('error_code')"/>
    </args>
  </payloadFactory>
  <property name="RESPONSE" scope="default" type="STRING" value="true"/>
  <header action="remove" name="To" scope="default"/>
  <property action="remove" name="NO_ENTITY_BODY" scope="axis2"/>
  <property action="remove" name="ContentType" scope="axis2"/>
  <property action="remove" name="Authorization" scope="transport"/>
  <property name="Access-Control-Allow-Origin" scope="transport"
    type="STRING" value="*"/>
  <property action="remove" name="Host" scope="transport"/>
  <property expression="get-property('error_code')" name="HTTP_SC"
    scope="axis2" type="STRING"/>
  <property action="remove" name="Accept" scope="transport"/>
  <property action="remove" name="X-JWT-Assertion" scope="transport"/>
  <property name="messageType" scope="axis2" type="STRING" value="application/json"/>
  <respond/>
</sequence>
